!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t:e.lunar=t()}(this,function(){"use strict";var e={hasClass:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.attr("class"))},addClass:function(t,a){!e.hasClass(t,a)&&t.attr("class",(t.getAttribute("class")?t.getAttribute("class")+" ":"")+a)},removeClass:function(t,a){var n=t.attr("class").replace(new RegExp("(\\s|^)"+a+"(\\s|$)","g"),"$2");e.hasClass(t,a)&&t.attr("class",n)},toggleClass:function(t,a){e[e.hasClass(t,a)?"removeClass":"addClass"](t,a)},className:function(e,t){e.attr("class",t),console.log("className",e)}};return e}),function(e){var t={cursorPoint:function(e,a){t.settings.pt.x=e.clientX,t.settings.pt.y=e.clientY;var n=a.find("svg").attr("id");return n=document.getElementById(n),t.settings.pt.matrixTransform(n.getScreenCTM().inverse())},angle:function(e,t){var a=t-50,n=e-50,s=Math.atan2(a,n);return s*=180/Math.PI,(s+=90)<0&&(s=360+s),s},setGraphValue:function(a,n,s){var o=s.find(t.settings.audioObj),i=t.settings.pc,r=i-parseFloat(n/o[0].duration*i,10);e(a).css("strokeDashoffset",r),0===n&&(e(a).addClass(a,"done"),a===e(t.settings.progress)&&e(a).attr("class","ended"))},reportPosition:function(e,a){var n=e.find(t.settings.progress);e.find(t.settings.audioObj);t.setGraphValue(n,a.currentTime,e)},stopAllSounds:function(){document.addEventListener("play",function(t){for(var a=document.getElementsByTagName("audio"),n=0,s=a.length;n<s;n++)a[n]!=t.target&&a[n].pause(),a[n]!=t.target&&e(a[n]).parent("div").find(".playing").attr("class","paused")},!0)},settings:{},init:function(a){var n=['<div class="controls"><div id="play" class="play"></div><div id="pause" class="pause"></div></div>','<svg viewBox="0 0 100 100" id="playable" version="1.1" xmlns="http://www.w3.org/2000/svg" width="178" height="178" data-play="playable" class="not-started playable">','<g class="shape">','<circle class="progress-track" cx="50" cy="50" r="47.45" stroke="#ffffff" stroke-opacity="0.25" stroke-linecap="round" fill="none" stroke-width="2.5"/>','<circle class="precache-bar" cx="50" cy="50" r="47.45" stroke="#ffffff" stroke-opacity="0.25" stroke-linecap="round" fill="none" stroke-width="2.5" transform="rotate(-90 50 50)"/>','<circle class="progress-bar" cx="50" cy="50" r="47.45" stroke="#E94E98" stroke-opacity="1" stroke-linecap="round" fill="none" stroke-width="2.5" transform="rotate(-90 50 50)"/>',"</g>","</svg>",'<p class="media_label">Dr. David Morris,<br>',"Head of Wellness","</p>"];n=n.join(" "),e.each(this,function(t,a){var s=e(this).find("audio");s.attr("id","audio"+t),n=(n=(n=n.replace('width="34"','width="'+s.data("size")+'"')).replace('height="34"','height="'+s.data("size")+'"')).replace('id="playable"','id="playable'+t+'"'),e(this).append(n)});var s=e(this).find("svg").attr("id");s=document.getElementById(s),t.defaults={this:this,thisSelector:this.selector.toString(),playObj:"playable",progress:".progress-bar",precache:".precache-bar",audioObj:"audio",controlsObj:".controls",pt:s.createSVGPoint(),pc:298.1371428256714},lunar={},t.settings=e.extend({},t.defaults,a),e(t.settings.controlsObj).on("click",function(a){var n=e(a.currentTarget).closest(e(t.settings.thisSelector)),s={el:n,activeAudio:n.find(t.settings.audioObj),playObj:n.find("[data-play]"),precache:n.find(t.settings.precache)};switch(s.class=s.playObj.attr("class"),s.class.replace("playable","").trim()){case"not-started":t.stopAllSounds(),s.activeAudio[0].play();var o=document.getElementById(s.activeAudio.attr("id"));o.addEventListener("timeupdate",function(e){t.reportPosition(n,o)}),s.playObj.attr("class","playing"),document.getElementById("play").style.display="none",document.getElementById("pause").style.display="block";break;case"playing":s.playObj.attr("class","playable paused"),s.activeAudio[0].pause(),e(o).off("timeupdate"),document.getElementById("play").style.display="block",document.getElementById("pause").style.display="none";break;case"paused":s.playObj.attr("class","playable playing"),s.activeAudio[0].play(),document.getElementById("play").style.display="none",document.getElementById("pause").style.display="block";break;case"ended":s.playObj.attr("class","not-started playable"),s.activeAudio.off("timeupdate",t.reportPosition)}}),e(t.defaults.audioObj).on("progress",function(a){if(this.buffered.length>0){var n=this.buffered.end(this.buffered.length-1),s=e(a.currentTarget).parent().find(t.settings.precache),o=e(this).closest(e(t.settings.thisSelector));t.setGraphValue(s,n,o)}})}};e.fn.mediaPlayer=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist on jQuery.mediaPlayer"):t.init.apply(this,arguments)}}(jQuery),$(document).ready(function(){var e=$(window).innerHeight();function t(){return e}$(window).on("resize",function(){e=$(window).innerHeight()});var a=new ScrollMagic.Controller;a.scrollTo(function(e){TweenMax.to(window,.5,{scrollTo:{y:e,autoKill:!0},ease:Cubic.easeInOut})}),$(".nav__anchor").click(function(e){var t=$(this).attr("href");$(t).length>0&&(e.preventDefault(),a.scrollTo(t))}),$(".nav__anchor").mouseenter(function(e){var t=$(this).find(".nav__tooltip"),a=$(this).find(".nav__tooltip__line"),n=new TimelineMax;n.to(a,.15,{ease:Sine.easeInOut,width:"20px"},.1),n.to(t,.15,{ease:Sine.easeInOut,opacity:1,y:0},.1)}),$(".nav__anchor").mouseleave(function(e){var t=$(this).find(".nav__tooltip"),a=$(this).find(".nav__tooltip__line"),n=new TimelineMax;n.to(t,.15,{ease:Sine.easeInOut,opacity:0,y:-5},.1),n.to(a,.15,{ease:Sine.easeInOut,width:"0"},.1)});var n=new TimelineMax;n.to(".nav__line--1",.25,{ease:Sine.easeInOut,height:"0"},0),n.to(".nav__line--2",.25,{ease:Sine.easeInOut,height:"50px",backgroundColor:"rgb(106, 185, 128)"},0),n.to(".nav__dot--1",.25,{ease:Sine.easeInOut,backgroundColor:"rgb(255, 255, 255)"},0),n.to(".nav__tooltip",.25,{ease:Sine.easeInOut,color:"rgb(255, 255, 255)"},0),n.to(".nav__tooltip__line",.25,{ease:Sine.easeInOut,backgroundColor:"rgb(255, 255, 255)"},0),n.to(".nav__dot--2",.25,{ease:Sine.easeInOut,backgroundColor:"rgb(106, 185, 128)"},0);new ScrollMagic.Scene({triggerElement:"#section2",triggerHook:10,duration:t,offset:0}).setPin("#section1",{pushFollowers:!1}).setTween(n).addTo(a);var s=new TimelineMax;s.to(".nav__dot--1",.25,{ease:Sine.easeInOut,backgroundColor:"rgb(110, 38, 123)"},0),s.to(".nav__dot--2",.25,{ease:Sine.easeInOut,backgroundColor:"rgb(110, 38, 123)"},0),s.to(".nav__tooltip",.25,{ease:Sine.easeInOut,color:"rgb(110, 38, 123)"},0),s.to(".nav__tooltip__line",.25,{ease:Sine.easeInOut,backgroundColor:"rgb(110, 38, 123)"},0),s.to(".nav__dot--3",.25,{ease:Sine.easeInOut,backgroundColor:"rgb(106, 185, 128)"},0),s.to(".sticky",.25,{ease:Sine.easeInOut,y:-120},0);new ScrollMagic.Scene({triggerElement:"#section3",triggerHook:10,duration:t,offset:50}).setPin("#section2",{pushFollowers:!1}).setTween(s).addTo(a);$(".container").each(function(){new ScrollMagic.Scene({triggerElement:this.children[0],triggerHook:.9}).setClassToggle(this,"fade-in").addTo(a)}),$(".media_player").mediaPlayer()});